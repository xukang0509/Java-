[TOC]

### 001：三位数

**题目：**有 **1、2、3、4** 四个数字，能组成多少个**互不相同**且**无重复数字**的三位数？都是多少？

**程序分析：**可填在百位、十位、个位的数字都是 **1、2、3、4**，组成所有的排列后再去掉不满足条件的排列。

```C
#include <stdio.h>

int main(void) {
    int g, s, b;

    for (b = 1; b <= 4; b++) {
        for (s = 1; s <= 4; s++) {
            for (g = 1; g <= 4; g++) {
                if (g!=s && g!=b && s!=b) { // 确保g,s,b互不相同
                    printf("%d,%d,%d\n", b, s, g);
                }
            }
        }
    }

    return 0;
}
```



### 002：求利润

**题目：**企业发放的奖金根据利润提成。

- 利润低于或等于10万元时，奖金可提10%；
- 利润高于10万元，低于20万元时，低于10万元的部分按10%提成，高于10万元的部分，可提成7.5%；
- 20万到40万之间时，高于20万元的部分，可提成5%；
- 40万到60万之间时高于40万元的部分，可提成3%；
- 60万到100万之间时，高于60万元的部分，可提成1.5%；
- 高于100万元时，超过100万元的部分按1%提成。

从键盘输入当月利润I，求应发放奖金总数？

**程序分析：**请利用数轴来分界，定位。注意定义时需把奖金定义成双精度浮点(double)型。

```C
#include <stdio.h>

int main(void) {
    double profits; // 利润
    double bonus;   // 最后的总奖金
    double bonus1, bonus2, bonus3, bonus4, bonus5;

    bonus1 = 100000 * 0.1;            // 10万元的奖金
    bonus2 = bonus1 + 100000 * 0.075; // 20万元的奖金
    bonus3 = bonus2 + 200000 * 0.05;  // 40万元的奖金
    bonus4 = bonus3 + 200000 * 0.03;  // 60万元的奖金
    bonus5 = bonus4 + 400000 * 0.015; // 100万元的奖金

    printf("Please enter the profits: ");
    scanf("%lf", &profits);

    if (profits <= 100000) {
        bonus = profits * 0.1;
    } else if (profits <= 200000) {
        bonus = bonus1 + (profits - 100000) * 0.075;
    } else if (profits <= 400000) {
        bonus = bonus2 + (profits - 200000) * 0.05;
    } else if (profits <= 600000) {
        bonus = bonus3 + (profits - 400000) * 0.03;
    } else if (profits <= 1000000) {
        bonus = bonus4 + (profits - 600000) * 0.015;
    } else {
        bonus = bonus5 + (profits - 1000000) * 0.01;
    }

    printf("bonus = %lf\n", bonus);

    return 0;
}
```



### 003：平方数*

**题目：**一个整数，它加上100后是一个完全平方数，再加上168又是一个完全平方数，请问该数是多少？

**程序分析：**

假设该数为 x。

1. 则：x + 100 = n<sup>2</sup>, x + 100 + 168 = m<sup>2</sup>
2. 计算等式：m<sup>2</sup> - n<sup>2</sup> = (m + n)(m - n) = 168
3. 假设：m + n = i，m - n = j，i * j =168，i 和 j 至少一个是偶数
4. 可得：m = (i + j)/2， n = (i - j)/2，i 和 j 要么都是偶数，要么都是奇数。
5. 从 3 和 4 推导可知道，i 与 j 均是大于等于 2 的偶数。
6. 由于 i * j = 168， j>=2，则 **1 < i < 168/2 + 1**。
7. 接下来将 i 的所有数字循环计算即可。

```C
#include <stdio.h>

int main(void) {
    int m, n, i, j;
    int x;

    for (i = 2; i < 168/2 + 1; i+=2) {
        if (168 % i == 0) {
            j = 168 / i;
            if (i > j && (i+j)%2 == 0 && (i-j)%2 == 0) {
                m = (i+j)/2;
                n = (i-j)/2;
                x = n*n - 100;
                printf("%d + 100 = %d * %d\n", x, n, n);
                printf("%d + 268 = %d * %d\n", x, m, m);
            }
        }
    }

    return 0;
}
```



### 004：输入日期，输出第几天

**题目：**输入某年某月某日，判断这一天是这一年的第几天？

**程序分析：**以3月5日为例，应该先把前两个月的加起来，然后再加上5天即本年的第几天，特殊情况，闰年且输入月份大于3时需考虑多加一天。

```c
#include <stdio.h>

int main(void) {
    const int months[12] = { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
    int year, month, day;
    int days = 0;
    int i;

    printf("Please enter the year, month and day like [2023,05,05]: ");
    scanf("%d,%d,%d", &year, &month, &day); // 输入 2020,5,20

    for (i = 0; i < month - 1; i++) { // 累加前4个月的天数
        days += months[i];
    }
    days += day; // 加第5月中的天数

    // 当输入的月份大于2时，再进行闰年的判断
    if ((month > 2) && (year%400 == 0 || (year%4 == 0 && year%100 != 0))) {
        days++;
    }

    printf("days = %d\n", days);

    return 0;
}
```



### 005：三数升序输出

**题目：**输入三个整数x,y,z，请把这三个数由小到大输出。

**程序分析：**我们想办法把最小的数放到x上，先将x与y进行比较，如果x>y则将x与y的值进行交换，然后再用x与z进行比较，如果x>z则将x与z的值进行交换，这样能使x最小。

```c
#include <stdio.h>

int main(void) {
    int x, y, z;
    int min, mid, max;

    printf("Please enter the three numbers: ");
    scanf("%d %d %d", &x, &y, &z);

    min = (x < y ? x : y) < z ? (x < y ? x : y) : z;
    max = (x > y ? x : y) > z ? (x > y ? x : y) : z;
    mid = x + y + z - min - max;

    printf("%d %d %d", min, mid, max);

    return 0;
}
```



### 006：\*号输出c图案

**题目：**用*号输出字母C的图案。

**程序分析：**可先用'*'号在纸上写出字母C，再分行输出。

```
*****
*
*
*
*****
```

```c
#include <stdio.h>
#define N 5

int main(void) {
    int i;

    for(i = 0; i < N; i++) {
        printf("*");
    }
    printf("\n");

    for(i = 0; i < N - 2; i++) {
        printf("*\n");
    }

    for(i = 0; i < N; i++) {
        printf("*");
    }
    printf("\n");

    return 0;
}
```



### 008：九九乘法表

**题目：**输出9*9口诀。

**程序分析：**分行与列考虑，共 9 行 9 列，i 控制行，j 控制列。

```c
#include <stdio.h>

int main(void) {
    int i, j;

    for (i = 1; i <= 9; i++) {
        for (j = 1; j <= i; j++) {
            printf("%d*%d=%-2d\t", j, i, i*j);
        }
        printf("\n");
    }

    return 0;
}
```

```
1*1=1 
1*2=2   2*2=4
1*3=3   2*3=6   3*3=9
1*4=4   2*4=8   3*4=12  4*4=16
1*5=5   2*5=10  3*5=15  4*5=20  5*5=25
1*6=6   2*6=12  3*6=18  4*6=24  5*6=30  6*6=36
1*7=7   2*7=14  3*7=21  4*7=28  5*7=35  6*7=42  7*7=49
1*8=8   2*8=16  3*8=24  4*8=32  5*8=40  6*8=48  7*8=56  8*8=64
1*9=9   2*9=18  3*9=27  4*9=36  5*9=45  6*9=54  7*9=63  8*9=72  9*9=81
```



### 011：古典问题（兔子生崽）*

**题目：**古典问题（兔子生崽）：有一对兔子，从出生后第3个月起每个月都生一对兔子，小兔子长到第三个月后每个月又生一对兔子，假如兔子都不死，问每个月的兔子总数为多少？（输出前40个月即可）

**程序分析：**兔子的规律为数列1,1,2,3,5,8,13,21....，即下个月是上两个月之和（从第三个月开始）。

```c
#include <stdio.h>
#define NUM 40

long fibonacii (int i);

int main(void) {
    int i;
    for (i = 1; i <= NUM; i++) {
        printf("Month %2d === %ld rabbits\n", i, fibonacii(i));
    }
    return 0;
}

// 斐波那契数列
long fibonacii (int i) {
    int a, b;
    if (i <= 2) return 1;
    a = 1;
    b = 1;
    while (i-- > 2) {
        b = a + b;
        a = b - a;
    }
    return b;
}
```



### 012：101-200之间的素数

**题目：**判断 101 到 200 之间的素数。

**程序分析：**判断素数的方法：用一个数分别去除 2 到 sqrt(这个数)，如果能被整除，则表明此数不是素数，反之是素数。

```c
#include <stdio.h>

int isPrime (int num);
int main(void) {
    int i, count = 0;
    for (i = 101; i <= 200; i++) {
        if (isPrime(i)) {
            printf("%d ", i);
            if (++count % 5 == 0) printf("\n");  
        }
    }
    return 0;
}

// 质数判断
int isPrime (int num) {
    if (num < 2) return 0;
    if (num == 2) return 1;
    int isPrime = 1;
    int i;
    for(i = 2; (i*i) <= num; i++) {
        if (num % i == 0) {
            isPrime = 0;
            break;
        }
    }
    return isPrime;
}
```



### 013：水仙花数

**题目：**打印出所有的"水仙花数"，所谓"水仙花数"是指一个三位数，其各位数字立方和等于该数 本身。例如：153是一个"水仙花数"，因为153=1的三次方＋5的三次方＋3的三次方。

**程序分析：**利用for循环控制100-999个数，每个数分解出个位，十位，百位。

```c
#include <stdio.h>
int main(void) {
    int i; 
    int g, s, b;
    for (i = 100; i < 1000; i++) {
        b = i / 100;
        s = i % 100 / 10;
        g = i % 100 % 10;
        if (b*b*b + s*s*s + g*g*g == i) {
            printf("%d\n", i);
        }
    }
    return 0;
}
```



### 014：分解质因数

**题目：**将一个正整数分解质因数。例如：输入90,打印出90=2\*3\*3\*5。

**程序分析：**对n进行分解质因数，应先找到一个最小的质数k，然后按下述步骤完成：

1. 如果这个质数恰等于（小于的时候，继续执行循环）n，则说明分解质因数的过程已经结束，另外打印出即可。
2. 但n能被k整除，则应打印出k的值，并用n除以k的商,作为新的正整数n.重复执行第二步。
3. 如果n不能被k整除，则用k+1作为k的值,重复执行第一步。

```c
#include <stdio.h>

int main(void) {
    int n, k;
    printf("Please enter a integer number bigger than 0: ");
    while (scanf("%d", &n) == 1 && n > 0) {
        printf("%d=", n);
        for(k = 2; k <= n; k++) {
            while (n % k == 0) {
                printf("%d", k);
                n = n / k;
                if (n != 1) printf("*");
            }
        }
        printf("\n");
        printf("Please enter next integer number bigger than 0: ");
    }
    return 0;
}
```



### 015：条件运算符

**题目：**利用条件运算符的嵌套来完成此题：学习成绩>=90分的同学用A表示，60-89分之间的用B表示，60分以下的用C表示。

**程序分析：**(a>b)?a:b这是条件运算符的基本例子。

```c
#include <stdio.h>

int main(void) {
    int score;
    char level;

    printf("Please enter a score [0-100]: ");
    while (scanf("%d", &score) && (score >= 0 && score <= 100)) {
        level = (score >= 90 ? 'A' : (score >= 60 ? 'B' : 'C'));
        printf("%d score level is %c\n", score, level);
        printf("Please enter next score [0-100]: ");
    }
    printf("Done.\n");

    return 0;
}
```



### 016：最大公约数和最小公倍数*

**题目：**输入两个正整数m和n，求其最大公约数和最小公倍数。

**程序分析：**

（1）最小公倍数 = 输入的两个数之积除于它们的最大公约数，关键是求出最大公约数；

（2）求最大公约数用辗转相除法（又名欧几里德算法）

假如求 26 和 12 两个正整数的最大公约数，用欧几里得算法：

26 / 12 = 2 … 2

12 / 2  = 6 …… 0

至此，最大公约数为2

流程：

第一步：a ÷ b，令r为所得余数；

第二步：互换：置 a←b，b←r，并返回第一步。

```c
#include <stdio.h>
int main(void) {
    int a = 26;
    int b = 12;

    int r = a % b;
    int m = a * b;
    while (r != 0) {
        a = b;
        b = r;
        r = a % b;  
    }
    printf("最大公约数是：%d\n", b);
    printf("最小公倍数是：%d\n", m / b);
    return 0;
}
```



### 017：计数(字母，空格，数字，其它字符)

**题目：**输入一行字符，分别统计出其中英文字母、空格、数字和其它字符的个数。

**程序分析：**利用while语句,条件为输入的字符不为'\n'。

```c
#include <stdio.h>

int main(void) {
    char c;
    int letters = 0, spaces = 0, digits = 0, others = 0;

    while ((c = getchar()) != '\n') {
        if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z'))
            letters++;
        else if (c >= '0' && c <= '9')
            digits++;
        else if (c == ' ')
            spaces++;
        else 
            others++;
    }
    printf("字母个数：%d\n", letters);
    printf("空格个数：%d\n", spaces);
    printf("数字个数：%d\n", digits);
    printf("其它个数：%d\n", others);

    return 0;
}
```



### 018：s=a+aa+aaa+aaaa+aa...a

**题目：**求s=a+aa+aaa+aaaa+aa...a的值，其中a是一个数字。例如2+22+222+2222+22222(此时共有5个数相加)，几个数相加由键盘控制。

**程序分析：**关键是计算出每一项的值。

```c
#include <stdio.h>

int main(void) {
    int num, a, i, t;
    int s = 0;
    printf("输入num和a: ");
    scanf("%d %d", &num, &a);
    t = a;
    for (i = 0; i < num; i++) {
        s += a;
        a = t + a * 10;
    }
    printf("s = %d", s);

    return 0;
}
```



### 019：1000以内的完数

**题目：**一个数如果恰好等于它的因子之和，这个数就称为"完数"。例如6=1＋2＋3.编程找出1000以内的所有完数。

```c
#include <stdio.h>
int isCompleteNum(int num);
int main(void) {
    int num, i;
    int count = 0;
    for (num = 2; num <= 1000; num++) {
        if (isCompleteNum(num)) {
            printf("%-5d", num);
            if(++count % 5 == 0) printf("\n");
        }
    }
    return 0;
}

int isCompleteNum(const int num) {
    int i, sum = 0;
    for (i = 1; i < num; i++) {
        if (num % i == 0) {
            sum += i;
        } 
    }
    return (sum == num);
}
```



### 020：小球自由下落

**题目：**一球从100米高度自由落下，每次落地后反跳回原高度的一半；再落下，求它在第10次落地时，共经过多少米？第10次反弹多高？

```c
#include <stdio.h>
#define N 10

int main(void) {
    double height = 100; // 初始高度
    double sum = 0.0;    // 经过多少米
    double ft;           // 每次反弹的高度
    int i;

    for (i = 0; i < N; i++) {
        ft = height / 2;    // 计算第i+1次反弹的高度
        sum += height + ft; // 累加：落地的高度 + 反弹的高度
        height = ft;        // 将此次反弹的高度作为下次下落的初始高度
    }
    printf("第%d次落地时，共经过%lf米，第10次反弹%lf米。\n", N, sum, ft);

    return 0;
}
/*
10次落地时，共经过299.707031米，第10次反弹0.097656米。
*/
```



### 021：猴子吃桃问题

**题目：**猴子吃桃问题：猴子第一天摘下若干个桃子，当即吃了一半，还不瘾，又多吃了一个；第二天早上又将剩下的桃子吃掉一半，又多吃了一个。以后每天早上都吃了前一天剩下的一半零一个。到第10天早上想再吃时，见只剩下一个桃子了。求第一天共摘了多少。

**程序分析：**采取逆向思维的方法，从后往前推断。

1) 设x1为前一天桃子数，设x2为第二天桃子数，则：

x2=x1/2-1, x1=(x2+1)*2

x3=x2/2-1, x2=(x3+1)*2

以此类推：x前=(x后+1)*2

2) 从第10天可以类推到第1天，是一个循环过程。

```c
#include <stdio.h>

int main(void) {
    int day;
    int peaches = 1;
    int num;

    for (day = 9; day > 0; day--) {
        num = peaches;
        peaches = (peaches + 1) * 2;
        printf("第%d天共摘了%d个桃子\n", day, peaches - num);
    }
    printf("一共有%d个桃子\n", peaches);

    return 0;
}
```



### 022：比赛名单

**题目：**两个乒乓球队进行比赛，各出三人。甲队为a,b,c三人，乙队为x,y,z三人。已抽签决定比赛名单。有人向队员打听比赛的名单。a说他不和x比，c说他不和x,z比，请编程序找出三队赛手的名单。

```c
#include <stdio.h>

int main(void) {
    char i, j, k;

    for (i = 'x'; i <= 'z'; i++)
        for (j = 'x'; j <= 'z'; j++)
            if (i != j)
                for (k = 'x'; k <= 'z'; k++)
                    if (i != k && j != k)
                        if (i != 'x' && k != 'x' && k != 'z')
                            printf("顺序为：a---%c\tb---%c\tc---%c", i, j, k);

    return 0;
}
/*
顺序为：a---z   b---x   c---y
*/
```



### 023：打印菱形

**题目：**打印出如下图案（菱形）。

```
   *
  ***
 *****
*******
 *****
  ***
   *
```

```c
#include <stdio.h>

int main(void)
{
    int i, j;

    for (i = 1; i <= 4; i++) {
        for (j = 1; j <= 4 - i; j++)
            printf(" ");
        for (j = 1; j <= (2*i)-1; j++)
            printf("*");
        printf("\n");
    }

    for (i = 1; i <= 3; i++) { 
        for (j = 1; j <= i; j++)
            printf(" ");
        for (j = 1; j <= (-2*i)+7; j++)
            printf("*");
        printf("\n");
    }

    return 0;
}
```



### 024：2/1，3/2，5/3，8/5...数列的前20项之和

**题目：**有一分数序列：2/1，3/2，5/3，8/5，13/8，21/13...求出这个数列的前20项之和。

**程序分析：**请抓住分子与分母的变化规律。

```c
#include <stdio.h>

int main(void) {
    float a = 2.0f, b = 1.0f, t; // 分母为a，分子为b
    float sum = 0.0f;
    int i;
    for (i = 0; i < 20; i++) {
        sum += a/b;
        t = a;
        a = a + b;
        b = t;
    }
    printf("数列的前20项之和为：%9.6f\n", sum);

    return 0;
}
/*
数列的前20项之和为：32.660263
*/
```



### 025：阶乘的累加

**题目：**求1+2!+3!+...+20!的和。

**程序分析：**此程序只是把累加变成了累乘。

```c
#include <stdio.h>
#define N 20

long double factorial(int n);
int main(void) {
    int i;
    long double sum = 0;
    for (i = 1; i <= N; i++) {
        sum += factorial(i);
    }
    printf("前%d个的阶乘累加之和为：%Lf\n", N, sum);
    return 0;
}

// 阶乘函数
long double factorial(int n) {
    long double r = 1;
    while (n >= 1) {
        r *= n;
        n--;
    }
    return r;
}
/*
前20个的阶乘累加之和为：2561327494111820313.000000
*/
```



### 026：递归方法求阶乘

**题目：**利用递归方法求5!。

**程序分析：**递归公式：f(n)=f(n-1)*4!

```c
#include <stdio.h>

int factorial(int n);
int main(void) {
    int i;
    for(i = 0; i <= 5; i++) {
        printf("%d!=%d\n", i, factorial(i));
    }
    return 0;
}

// 阶乘函数
int factorial(int n) {
    if (n == 0) return 1;
    return n * factorial(n - 1);
}
```



### 027：递归逆序输出

**题目：**利用递归函数调用方式，将所输入的5个字符，以相反顺序打印出来。

```c
#include <stdio.h>

void reverse_output (int n);
int main(void) {
    int i = 5;
    printf("输入%d个字符: ", i);
    reverse_output(i);
    // 清空缓冲区
    while (getchar() != '\n') continue;
    return 0;
}

void reverse_output (int n) {
    char c;
    if (n == 1) {
        c = getchar();
        putchar(c);
    } else {
        c = getchar();
        reverse_output(n-1);
        putchar(c);
    }
}
```



### 028：递归输出第五个人的年龄

**题目：**有5个人坐在一起，问第五个人多少岁？他说比第4个人大2岁。问第4个人岁数，他说比第3个人大2岁。问第三个人，又说比第2人大两岁。问第2个人，说比第一个人大两岁。最后问第一个人，他说是10岁。请问第五个人多大？

**程序分析：**利用递归的方法，递归分为回推和递推两个阶段。要想知道第五个人岁数，需知道第四人的岁数，依次类推，推到第一人（10岁），再往回推。

```c
#include <stdio.h>

#define PERSON 5          // 一个几个人
#define AGES 2            // 第n个人与第n+1个人之间的年龄差
#define FIRST_AGE 10      // 第一个人的初始年龄

int age(int n);
int main(void) {
    printf("第五个人的年龄为%d岁.\n", age(PERSON));
    return 0;
}

int age(int n) {
    if (n == 1) return FIRST_AGE;
    else return AGES + age(n-1);
}
```



### 029：逆序输出一个数字

**题目：**给一个不多于5位的正整数，要求：一、求它是几位数，二、逆序打印出各位数字。

**程序分析：**学会分解出每一位数，如下解释。

```c
#include <stdio.h>

int main(void) {
    int num, temp;
    int a, b, count;
    printf("请输入一个不多于5位的正整数：");
    while(scanf("%d", &num) && num > 0 && num < 100000) {
        count = 0;
        temp = num;

        do {
            a = temp / 10;
            b = temp % 10;
            putchar('0' + b);
            temp = a;
            count++;
        } while (temp > 0);

        putchar('\n');
        printf("%d是一个%d位数。\n", num, count);
        printf("请输入一个不多于5位的正整数：");
    }
    return 0;
}
```



### 030：回文数

**题目：**一个5位数，判断它是不是回文数。即12321是回文数，个位与万位相同，十位与千位相同。

**程序分析：**学会分解出每一位数。

```c
#include <stdio.h>
#define LOW 10000
#define HEIG 99999

int main(void) {
    int num;
    int g, s, q, w;
    for (num = LOW; num <= HEIG; num++) {
        // 12321
        g = num % 10;
        s = num / 10 % 10;
        q = num / 1000 % 10;
        w = num / 10000;
        if (g == w && s == q) {
            printf("%d 是一个回文数。\n", num);
        }
    }
    return 0;
}
```



### 031：根据首字母判断星期几

**题目：**请输入星期几的第一个字母来判断一下是星期几，如果第一个字母一样，则继续判断第二个字母。

**程序分析：**用情况语句比较好，如果第一个字母一样，则判断用情况语句或if语句判断第二个字母。

```c
#include <stdio.h>

// Monday Tuesday Wednesday Thursday Friday Saturday Sunday
// Mo Tu We Th Fr Sa Su
// M T W T F S S
int main(void) {
    char c;
    printf("请输入第一个字母：");
    c = getchar();
    while(getchar() != '\n') continue;
    switch (c) {
        case 'm':
        case 'M':
            printf("今天是星期一。\n");
            break;
        case 'w':
        case 'W':
            printf("今天是星期三。\n");
            break;
        case 'f':
        case 'F':
            printf("今天是星期五。\n");
            break;
        case 't':
        case 'T':
            printf("请输入第二个字母：");
            c = getchar();
            if(c == 'u' || c == 'U') printf("今天是星期二。\n");
            if(c == 'h' || c == 'H') printf("今天是星期四。\n");
            break;
        case 's':
        case 'S':
            printf("请输入第二个字母：");
            c = getchar();
            if(c == 'a' || c == 'A') printf("今天是星期六。\n");
            if(c == 'u' || c == 'U') printf("今天是星期日。\n");
            break;
        default:
            printf("Error.\n");
            break;
    }
    return 0;
}
```



### 032：删除字符串中的指定字母*

**题目：**删除一个字符串中的指定字母，如：字符串 "aca"，删除其中的 a 字母。

```c
#include <stdio.h>
#include <string.h>

int main(void) {
    char str[] = "I want to learn C language.";
    char c = 'a';
    int i, j = 0, len = strlen(str);
    puts(str);

    for (i = 0; i < len; i++) {
        if (str[i] == c) continue;
        str[j++] = str[i];
    }
    str[j] = '\0';

    puts(str);

    return 0;
}
```



### 033：质数判断

**题目：**判断一个数字是否为质数。

**程序分析：**质数（prime number）又称素数，有无限个。一个大于1的自然数，除了1和它本身外，不能被其他自然数整除。

```c
#include <stdio.h>

int isPrime (int num);
int main(void) {
    int num;
    printf("请输入一个正整数：");
    while (scanf("%d", &num) && num > 0) {
        if (isPrime(num)) {
            printf("%d是一个素数。\n", num);
        } else {
            printf("%d不是一个素数。\n", num);
        }
        printf("请输入一个正整数：");
    }
    return 0;
}

// 质数判断
int isPrime (int num) {
    if (num < 2) return 0;
    if (num == 2) return 1;
    int isPrime = 1;
    int i;
    for(i = 2; (i*i) <= num; i++) {
        if (num % i == 0) {
            isPrime = 0;
            break;
        }
    }
    return isPrime;
}
```



### 035：字符串反转

**题目：**字符串反转，如将字符串 "Hello World" 反转为 "dlroW olleH"。

```c
#include <stdio.h>
#include <string.h>

void reserve_str(char str[]);
int main(void) {
    char str[] = "Hello World";
    printf("反转前：%s\n", str);
    reserve_str(str);
    printf("反转后：%s\n", str);
    return 0;
}

void reserve_str(char str[]) {
    int len = strlen(str);
    int l = 0, r = len - 1;
    char t;
    while (l < r) {
        t = str[l];
        str[l] = str[r];
        str[r] = t;
        l++;
        r--;
    }
}
```



### 036：100之内的素数

**题目：**求100之内的素数。

**程序分析：**质数（prime number）又称素数，有无限个。一个大于1的自然数，除了1和它本身外，不能被其他自然数整除。

```c
#include <stdio.h>

int isPrime (int num);
int main(void) {
    int i, count = 0;
    for (i = 1; i < 100; i++) {
        if (isPrime(i)) {
            printf("%-3d ", i);
            if (++count % 5 == 0) printf("\n");  
        }
    }
    return 0;
}

// 质数判断
int isPrime (int num) {
    if (num < 2) return 0;
    if (num == 2) return 1;
    int isPrime = 1;
    int i;
    for(i = 2; (i*i) <= num; i++) {
        if (num % i == 0) {
            isPrime = 0;
            break;
        }
    }
    return isPrime;
}
```



### 037：排序

**题目：**对10个数进行排序。

**程序分析：**可以利用选择法，即从后9个比较过程中，选择一个最小的与第一个元素交换，下次类推，即用第二个元素与后8个进行比较，并进行交换。

```c
#include <stdio.h>
#define N 10

void printArray(const int arr[]);
void selection_sort(int arr[]);

int main(void) {
    int arr[N] = {6, 15, 2, 4, 65, 43, 1, 16, 14, 69};
    printf("排序前：");
    printArray(arr);
    selection_sort(arr);
    printf("排序后：");
    printArray(arr);
    return 0;
}

// 打印数组
void printArray(const int arr[]) {
    int i;
    for (i = 0; i < N; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}

// 选择排序
void selection_sort(int arr[]) {
    int i, j, minIndex;
    int temp;
    for (i = 0; i < N - 1; i++) {
        for (j = i + 1, minIndex = i; j < N; j++) {
            if (arr[minIndex] > arr[j]) {
                minIndex = j;
            }
        }
        if (minIndex != i) {
            temp = arr[i];
            arr[i] = arr[minIndex];
            arr[minIndex] = temp;
        }
    }
}
```



### 038：求一个3*3矩阵对角线元素之和

**题目：**求一个3*3矩阵对角线元素之和

**程序分析：**利用双重for循环控制输入二维数组，再将a\[i\]\[i\]累加后输出。

```c
#include <stdio.h>
#define N 3

int main(void) {
    int arr[N][N];
    int i, j, sum = 0;
    printf("输入3*3的矩阵：\n");
    for (i = 0; i < N; i++) {
        for(j = 0; j < N; j++) {
            scanf("%d", &arr[i][j]);
        }
    }
    for(i = 0; i < N; i++) {
        sum += arr[i][i];
    }
    printf("对角线之和为：%d\n", sum);

    return 0;
}
```



### 039：有序数组插入元素

**题目：**有一个已经排好序的数组。现输入一个数，要求按原来的规律将它插入数组中。

**程序分析：**首先判断此数是否大于最后一个数,然后再考虑插入中间的数的情况,插入后此元素之后的数,依次后移一个位置。

```c
#include <stdio.h>
#define N 20

void printArray(const int arr[]);
void intsert(int arr[], int *size, int n, int insert_num);

int main(void) {
    int arr[N] = { 1, 2, 4, 6, 14, 15, 16, 43, 65, 69 };
    int size = 10;
    int len = sizeof(arr) / sizeof(int);
    printf("size = %d, len = %d\n", size, len);

    printArray(arr);
    printf("插入3：\n");
    intsert(arr, &size, N, 3);
    printArray(arr);
    printf("插入78：\n");
    intsert(arr, &size, N, 78);
    printArray(arr);
    printf("插入43：\n");
    intsert(arr, &size, N, 43);
    printArray(arr);

    return 0;
}

void printArray(const int arr[]) {
    int i;
    for (i = 0; i < N; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}

/*
*        arr: 待插入的数组
*       size: 指向"元素数量"的指针变量
*          n: 数组容量
* insert_num: 待插入元素
*/
void intsert(int arr[], int *size, int n, int insert_num) {
    int i, j;
    if (*size == n) {
        printf("数组容量已满.\n");
        return;
    }
    if (arr[(*size) - 1] <= insert_num) {
        arr[*size] = insert_num;
    } else {
        for (i = 0; i < *size; i++) {
            if (arr[i] > insert_num) break;
        }
        for(j = *size; j > i; j--) {
            arr[j] = arr[j-1];
        }
        arr[j] = insert_num;
    }
    (*size)++;
}
/*
size = 10, len = 20
1 2 4 6 14 15 16 43 65 69 0 0 0 0 0 0 0 0 0 0
插入3：
1 2 3 4 6 14 15 16 43 65 69 0 0 0 0 0 0 0 0 0
插入78：
1 2 3 4 6 14 15 16 43 65 69 78 0 0 0 0 0 0 0 0
插入43：
1 2 3 4 6 14 15 16 43 43 65 69 78 0 0 0 0 0 0 0
*/
```



### 040：数组逆序后输出

**题目：**将一个数组逆序后输出。

**程序分析：**用第一个与最后一个交换。

```c
#include <stdio.h>

void printArray(const int arr[], int n);
void reserve_arr(int arr[], int n);

int main(void) {
    int arr[] = { 1, 2, 4, 6, 14, 15, 16, 43, 65, 69 };
    int len = sizeof(arr) / sizeof(int);

    printArray(arr, len);
    reserve_arr(arr, len);
    printArray(arr, len);

    return 0;
}

void reserve_arr(int arr[], int n) {
    int l = 0, r = n - 1;
    int temp;
    while (l < r) {
        temp = arr[l];
        arr[l] = arr[r];
        arr[r] = temp;
        l++;
        r--;
    }
}

void printArray(const int arr[], int n) {
    int i;
    for (i = 0; i < n; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}
```



### 054：取整数的4~7位

**题目：**取一个整数 a 从右端开始的 4～7 位。

**程序分析：**可以这样考虑：

(1)先使 a 右移 4 位。

(2)设置一个低 4 位全为 1，其余全为 0 的数，可用\~(\~0<<4)

(3)将上面二者进行 & 运算。

```c
#include <stdio.h>

int main(void) {
    unsigned int a, b, c, d;
    printf("输入一个正整数: ");
    scanf("%u", &a);

    b = a >> 4;
    c = ~(~0<<4);
    d = b & c;

    printf("%u\n%u\n", a, d);

    return 0;
}
```



### 061：杨辉三角形

**题目：**打印出杨辉三角形（要求打印出10行）。

```
1
1    1
1    2    1
1    3    3    1
1    4    6    4    1
```

```c
#include <stdio.h>
#define N 10

int main(void) {
    int i, j;
    int arr[N][N];

    for (i = 0; i < N; i++) {
        for (j = 0; j <= i; j++) {
            if (j == 0 || j == i) {
                arr[i][j] = 1;
            } else {
                arr[i][j] = arr[i-1][j] + arr[i-1][j-1];
            }
        }
    }

    for (i = 0; i < N; i++) {
        for (j = 0; j <= i; j++) {
            printf("%-5d", arr[i][j]);
        }
        printf("\n");
    }

    return 0;
}
```



### 066：指针操作升序输出三数

**题目：**输入3个数a,b,c，按大小顺序输出。

**程序分析：**利用指针方法。

```c
#include <stdio.h>

void swap(int *x, int *y);
int main(void) {
    int a, b, c;
    int *p1, *p2, *p3;
    printf("输入a, b, c: \n");
    scanf("%d %d %d", &a, &b, &c);
    p1 = &a;
    p2 = &b;
    p3 = &c;

    if (a > b)
        swap(p1, p2);
    if (a > c)
        swap(p1, p3);
    if (b > c)
        swap(p3, p2);

    printf("a = %d, b = %d, c = %d\n", a, b, c);
    return 0;
}

void swap(int *x, int *y) {
    int temp = *x;
    *x = *y;
    *y = temp;
}
```



### 067：数组中最大最小值交换

**题目：**输入数组，最大的与第一个元素交换，最小的与最后一个元素交换，输出数组。

**思路**：找最大最小值

```c
#include <stdio.h>

void printArray(const int arr[], int n);
int main(void) {
    int arr[] = {6, 15, 2, 4, 65, 43, 1, 16, 14, 69};
    int length = sizeof(arr) / sizeof(int);
    int max = arr[0], min = arr[0], maxI = 0, minI = 0;
    int i, temp;

    printArray(arr, length);
    for(i = 1; i < length; i++) {
        if(arr[i] > max) {
            max = arr[i];
            maxI = i;
        }
        if(arr[i] < min) {
            min = arr[i];
            minI = i;
        }
    }

    printf("max = %d, maxI = %d\n", max, maxI);
    printf("min = %d, minI = %d\n", min, minI);

    if (maxI != 0) {
        temp = arr[0];
        arr[0] = arr[maxI];
        arr[maxI] = temp;
    }

    if (minI != (length - 1)) {
        temp = arr[length-1];
        arr[length-1] = arr[minI];
        arr[minI] = temp;
    }
    printArray(arr, length);
    return 0;
}

void printArray(const int arr[], int n) {
    int i;
    for (i = 0; i < n; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}
```



### 068：滚动数组

**题目：**有 n个整数的数组，使其前面各数顺序向后移 m 个位置，最后m个数变成最前面的 m 个数。

**思路**：数组整体翻转一次，接得前m个数翻转一次，第m+1个数到最后一个数之间再翻转一次。

```c
#include <stdio.h>

void printArray(const int arr[], const int n);
void reserve_arr(int arr[], int low, int high);
void move (int arr[], int n, int m);

int main(void) {
    int arr[] = {6, 15, 2, 4, 65, 43, 1, 16, 14, 69};
    // 69 14 16 1 43 65 4 2 15 6
    // 1 16 14 69 6 15 2 4 65 43
    int n = sizeof(arr) / sizeof(int);
    int m = 4;
    printArray(arr, n);
    move(arr, n, m);
    printArray(arr, n);
    return 0;
}

void move (int arr[], int n, int m) {
    if (n <= m) {
        return;
    }
    reserve_arr(arr, 0, n-1);
    reserve_arr(arr, 0, m-1);
    reserve_arr(arr, m, n-1);
}

void reserve_arr(int arr[], int low, int high) {
    int l = low, r = high;
    int temp;
    while (l < r) {
        temp = arr[l];
        arr[l] = arr[r];
        arr[r] = temp;
        l++;
        r--;
    }
}

void printArray(const int arr[], const int n) {
    int i;
    for (i = 0; i < n; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}
```



### 069：约瑟夫环

**题目：**有n个人围成一圈，顺序排号。从第一个人开始报数（从1到3报数），凡报到3的人退出圈子，问最后留下的是原来第几号的那位。

```c
#include <stdio.h>
#define N 8

void joseph(int arr[], int n, int bs);
int main(void) {
    int arr[N];
    int i;
    for (i = 0; i < N; i++)
        arr[i] = 1;
    joseph(arr, N, 3);
    return 0;
}

void joseph(int arr[], int n, int bs) {
    int count = n;
    int baoshu = 0, index = -1;

    while (count > 0) {
        index = (++index % n);
        if (arr[index] == 1 && ++baoshu % bs == 0) {
            arr[index] = 0;
            printf("%-4d", index + 1);
            count--;
        }
    }
}
```



### 070：求字符串的长度

**题目：**写一个函数，求一个字符串的长度，在 main 函数中输入字符串，并输出其长度。

```c
#include <stdio.h>
#include <string.h>

int string_length (const char * str);
int main(void) {
    char *str1 = "HelloWorld";
    char *str2 = "Hello World";

    printf("string_length(str1) = %d\n", string_length(str1));
    printf("strlen(str1) = %d\n", strlen(str1));
    printf("string_length(str2) = %d\n", string_length(str2));
    printf("strlen(str2) = %d\n", strlen(str2));

    return 0;
}

int string_length (const char * str) {
    int count = 0;
    while (*str) {
        count++;
        str++;
    }
    return count;
}
/*
string_length(str1) = 10
strlen(str1) = 10
string_length(str2) = 11
strlen(str2) = 11
*/
```



### 071：输入输出5个学生的数据

**题目：**编写input()和output()函数输入，输出5个学生的数据记录。

```c
#include <stdio.h>
#define N 5

typedef struct {
    char name[20];
    char sex[5];
    int age;
} Stu;

void input(Stu * stu);
void output(const Stu * stu);

int main(void) {
    Stu students[N];

    printf("请输入%d个学生的信息：姓名 性别 年龄:\n", N);
    input(students);

    printf("%d个学生的信息如下：\n姓名\t\t性别\t\t年龄\n", N);
    output(students);

    return 0;
}

void input(Stu * stu) {
    int i;
    for (i = 0; i < N; i++) {
        printf("第%d个学生的信息：", i+1);
        scanf("%s %s %d", stu[i].name, stu[i].sex, &(stu[i].age));
    }
}

void output(const Stu * stu) {
    int i;
    for (i = 0; i < N; i++) {
        printf("%s\t\t%s\t\t%d\n", stu[i].name, stu[i].sex, stu[i].age);
    }
}
```



### 072：创建一个链表

**题目：**创建一个链表。

```c
#include <stdio.h>
#include <stdlib.h>

typedef struct LNode {
    int data;
    struct LNode *next;
} LNode, *LinkList;

LinkList CreatList(int n);
void print(LinkList h);

int main(void) {
    LinkList Head = NULL;
    int n;

    printf("输入元素的数目：");
    scanf("%d", &n);
    Head = CreatList(n);

    printf("刚刚建立的各个链表元素的值为：\n");
    print(Head);

    printf("\n");
    return 0;
}

LinkList CreatList(int n) {
    LinkList L, p, q;
    int i;
    L = (LNode *) malloc(sizeof(LNode));
    if (!L) return 0;
    L->next = NULL;
    q = L;
    for (i = 1; i <= n; i++) {
        p = (LNode *) malloc(sizeof(LNode));
        printf("请输入第%d个元素的值：", i);
        scanf("%d", &(p->data));
        p->next = NULL;
        q->next = p;
        q = p;
    }
    return L;
}

void print(LinkList h) {
    LinkList p = h->next;
    while (p != NULL) {
        printf("%-4d", p->data);
        p = p->next;
    }
}

/*
输入元素的数目：5
请输入第1个元素的值：6 
请输入第2个元素的值：7
请输入第3个元素的值：8
请输入第4个元素的值：1
请输入第5个元素的值：3
刚刚建立的各个链表元素的值为：
6   7   8   1   3
*/
```



### 075：反转输出一个整数

**题目：**输入一个整数，并将其反转后输出。

```c
#include <stdio.h>

int main(void) {
    int num;
    int remainder, reversedNum = 0;

    printf("输入一个大于二位的数：");
    scanf("%d", &num);

    while (num) {
        remainder = num % 10;
        reversedNum = reversedNum * 10 + remainder;
        num /= 10;
    }

    printf("反转后的整数：%d\n", reversedNum);

    return 0;
}
```



### 076：函数指针用法

**题目：**编写一个函数，输入n为偶数时，调用函数求1/2+1/4+...+1/n,当输入n为奇数时，调用函数1/1+1/3+...+1/n(利用函数指针)。

```c
#include <stdio.h>

double oddNumber(int n);   // n为奇数
double evenNumber(int n);  // n为偶数

int main (void) {
    int n;
    double r;
    double (*pfunc) (int n);
    printf("请输入一个大于0的数：\n");
    while (scanf("%d", &n) && n > 0) {
        if (n % 2) {
            pfunc = oddNumber;
        } else {
            pfunc = evenNumber;
        }
        r = (*pfunc) (n);
        printf("%lf\n", r);

        printf("请输入一个大于等于0的数：\n");
    }

    return 0;
}

double oddNumber(int n) {
    int i;
    double sum = 0.0;
    for (i = 1; i <= n; i += 2) {
        sum += (double) 1 / i;  
    }
    return sum;
}


double evenNumber(int n) {
    int i;
    double sum = 0.0;
    for (i = 2; i <= n; i += 2) {
        sum += (double) 1 / i;
    }
    return sum;
}
```



### 079：字符串排序

**题目：**字符串排序。

```c
#include <stdio.h>
#include <string.h>
#define N 6

void str_sort (char *strs[], int num);
int main(void) {
    int i;
    char * strs[N] = { "hello", "alpha", "babel", "zero", "zee", "alpa" };

    printf("Before sorted: \n");
    for (i = 0; i < N; i++) puts(strs[i]);
    printf("\n");

    str_sort(strs, N);

    printf("After sorted: \n");
    for (i = 0; i < N; i++) puts(strs[i]);

    return 0;
}

// 冒泡排序
void str_sort (char *strs[], int num) {
    char *temp;
    int i, j;
    for (i = num - 1; i > 0; i--) {
        for (j = 1; j <= i; j++) {
            if (strcmp(strs[j-1], strs[j]) > 0) {
                temp = strs[j-1];
                strs[j-1] = strs[j];
                strs[j] = temp;
            }
        }
    }
}
```



### 081：`809*??=800*??+9*??`

**题目：**`809*??=800*??+9*??`；其中??代表的两位数, 809\*??为四位数，8\*??的结果为两位数，9\*??的结果为3位数。求??代表的两位数，及809\*??后的结果。

```c
#include <stdio.h>

int main(void) {
    int a;
    int b, c, d;
    for (a = 10; a < 100; a++) {
        b = 809 * a;
        c = 8 * a;
        d = 9 * a;
        if (b > 999 && b < 10000 && c < 100 && d > 99) {
            printf("\n%d = 800 * %d + 9 * %d\n", b, a, a);
        }
    }

    return 0;
}
```



### 082：八进制转换为十进制

**题目：**八进制转换为十进制

(123)<sub>8</sub> = 1\*8<sup>2</sup> + 2\*8<sup>1</sup> + 3*8<sup>0</sup> = 64 + 16 + 3 = (83)<sub>10</sub>

```c
#include <stdio.h>
/*
(123)8 	初始：n = 0
第一轮：n = 0*8 + 1 = 1
第二轮：n = 1*8 + 2 = 10
第三轮：n = 10*8 + 3 = 1*8*8 + 2*8 + 3 = 83
*/
int main(void) {
    char s[20];
    int i = 0, n = 0;
    printf("请输入一个八进制数：\n");
    gets(s);
    while (s[i] != '\0') {
        n = n * 8 + s[i] - '0';
        i++;
    }
    printf("刚输入的八进制数转化为十进制为 %d\n", n);

    return 0;
}
```



### 083：求0—7所能组成的奇数个数

**题目：**求0—7所能组成的奇数个数。

**程序分析：**

这个问题其实是一个排列组合的问题，设这个数为 **sun=a1a2a3a4a5a6a7a8**, **a1-a8**表示这个数的某位的数值，当一个数的最后一位为奇数时，那么这个数一定为奇数，不管前面几位是什么数字。如果最后一位数为偶数，则这个数一定为偶数。

a1-a8可以取 0-7 这个八个数字，首位数字不为 0。

从该数为一位数到该数为8位数开始统计奇数的个数：

1. 1 当只有一位数时也就是该数的最后一位，奇数个数为4
2. 2 当该数为两位数时，奇数个数为4\*7=28
3. 3 当该数为三位数时，奇数个数为：4\*8\*7=224
4. ...
5. 8 当该数为八位数时，奇数个数为：4\*8\*8\*8\*8\*8\*8\*7(依次为最后一位到第一位)

```c
#include <stdio.h>

int main(void) {
    long sum = 4, s = 4; //sum的初始值为4表示，只有一位数字组成的奇数个数为4个
    int j;
    for (j = 2; j <= 8; j++) {    
        printf("%d位数为奇数的个数%ld\n", j-1, s);
        if (j <= 2)
            s *= 7;
        else
            s *= 8;
        sum += s;    
    }
    printf("%d位数为奇数的个数%ld\n", j-1, s);
    printf("奇数的总个数为：%ld\n", sum);

    return 0;
}
```

```
1位数为奇数的个数4
2位数为奇数的个数28
3位数为奇数的个数224
4位数为奇数的个数1792
5位数为奇数的个数14336
6位数为奇数的个数114688
7位数为奇数的个数917504
8位数为奇数的个数7340032
奇数的总个数为：8388608
```



### 084：偶数表示两个素数之和。

**题目：**一个大于2的偶数总能表示为两个素数之和。

**程序分析：**我去，这是什么题目，要我证明这个问题吗？真不知道怎么证明。那就把一个偶数分解成两个素数吧。

```c
#include <stdio.h>
#define TRUE 1
#define FALSE 0

int isPrime(int n);
int main(void) {
    int n, i;

    for(n = 4; n <= 2000; n++) {
        for (i = 1; i*2 <= n; i++) {
            if (isPrime(i) && isPrime(n-i)) {
                printf("%-5d= %-5d + %-5d\n", n, i, n-i);
            }
        }
    }

    return 0;
}

int isPrime(int n) {
    int i;
    if (n < 2) return FALSE;
    else if (n < 4) return TRUE;
    else if (n % 2 == 0) return FALSE;
    else {
        for(i = 3; i*i <= n; i++) {
            if (n % i == 0) return FALSE;
        }
    }
    return TRUE;
}
```



### 085：判断一个素数能被几个9整除

**题目：**判断一个素数能被几个9整除。

11 能被 99 整除

```c
#include <stdio.h>
#define TRUE 1
#define FALSE 0

int isPrime(int);
int main(void) {
    int i, cnt;
    long long numof9;

    for(i = 3; i < 200; i++) {
        if (isPrime(i)) {
            numof9 = 9;
            cnt = 1;
            while (numof9 % i != 0) {
                numof9 = numof9 * 10 + 9;
                cnt++;
            }
            printf("素数%d能整除%d个9组成的数%lld\n", i, cnt, numof9);
        }
    }

    return 0;
}

int isPrime(int n) {
    int i;
    if (n < 2) return FALSE;
    else if (n < 4) return TRUE;
    else if (n % 2 == 0) return FALSE;
    else {
        for (i = 3; i*i <= n; i++) {
            if (n % i == 0) return FALSE;
        }
    } 
    return TRUE;
}
```



### 086：两个字符串连接

**题目：**两个字符串连接程序。 

```c
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef char * String;
String str_conn (String, String);
int main(void) {
    String s1 = "I Love ";
    String s2 = "Learning C ";
    String s3 = "Programming.";
    puts(s1);
    puts(s2);
    puts(s3);

    s1 = str_conn(s1, s2);
    s1 = str_conn(s1, s3);

    puts(s1);
    return 0;
}

String str_conn(String s1, String s2) {
    String str;
    str = (String) malloc(strlen(s1) + strlen(s2) + 1);
    str[0] = '\0';
    strcat(str, s1);
    strcat(str, s2);
    return str;
}
```



### 089：四位数加密

**题目：**某个公司采用公用电话传递数据，数据是四位的整数，在传递过程中是加密的，加密规则如下：每位数字都加上5后用和除以10的余数代替该数字，再将第一位和第四位交换，第二位和第三位交换。

6 7 8 9 

每位数加5

11 12 13 14

对10取模
1 2 3 4

第一位和第四位交换，第二位和第三位交换

4 3 2 1

```c
#include <stdio.h>
#define N 4

int encode(int n);
int main(void) {
    int num, encodeNum;
    printf("请输入一个4位数：");
    while (scanf("%d", &num) && num > 999 && num < 10000) {
        encodeNum = encode(num);
        printf("%d 加密后：%d\n", num, encodeNum);
        printf("请输入一个4位数：");
    }
    return 0;
}

int encode(int n) {
    int i, temp, res = 0, t;
    int arr[N];
    arr[0] = n % 10;                // 个位
    arr[1] = n % 100 / 10;          // 十位
    arr[2] = n % 1000 / 100;        // 百位
    arr[3] = n / 1000;              // 千位

    // 每位添加5 后对10取模
    for (i = 0; i < N; i++) {
        arr[i] += 5;
        arr[i] %= 10;
    }
    // 第一位和第四位交换，第二位和第三位交换
    for (i = 0; i < N/2; i++) {
        temp = arr[i];
        arr[i] = arr[N-1-i];
        arr[N-1-i] = temp;
    }
    for (i = 0, t = 1; i < N; i++, t*=10) {
        res += arr[i] * t;
    }
    return res;
}
```



### 096：字符串中子串出现的次数 

**题目：**计算字符串中子串出现的次数。

```c
#include <stdio.h>
#include <string.h>

int num_of_pattern(char *, char *);
int main(void) {
    char str1[50] = "78912345126123";
    char str2[10] = "123";

    printf("子串\"%s\"在母串\"%s\"中匹配的项数为：%d\n", str2, str1, num_of_pattern(str1, str2));
    return 0;
}

int num_of_pattern(char * test, char * pattern) {
    int i, j;
    int count = 0;
    int tlen = strlen(test);
    int plen = strlen(pattern);

    if(plen > tlen) return 0;
    for (i = 0; i < tlen; i++) {
        for (j = 0; j < plen; j++) {
            if (test[i+j] != pattern[j]) {
                break;
            }
        }
        if (j == plen) count++;
    }  

    return count;
}
```



### 097：字符串写入文件

**题目：**从键盘输入一些字符，逐个把它们送到磁盘上去，直到输入一个#为止。

```c
#include <stdio.h>
#include <stdlib.h>
#define SLEN 20

int main(void) {
    char ch;
    char filename[SLEN];
    FILE *fp = NULL;
    printf("输入你要保存到的文件的名称：\n");
    scanf("%s", filename);

    if((fp = fopen(filename, "w")) == NULL) {
        printf("Error: 打开文件失败\n");
        exit(0);
    }
    printf("现在你可以输入你要保存的一些字符，以#结束：\n");
    while (getchar() != '\n') continue;
    while ((ch = getchar()) != '#') {
        fputc(ch, fp);
    }
    fclose(fp);

    return 0;
}
```



### 098：字符串写入文件

**题目：**从键盘输入一个字符串，将小写字母全部转换成大写字母，然后输出到一个磁盘文件"test"中保存。

```c
#include <stdio.h>
#include <stdlib.h>
#define FILENAME "test"

int main(void) {
    FILE *fp = NULL;
    char str[50];
    int i = 0;

    printf("输入一个字符串：\n");
    gets(str);
    while (str[i] != '\0') {
        if (str[i] >= 'a' && str[i] <= 'z') {
            str[i] -= 32;
        }
        i++;
    }
    if ((fp = fopen(FILENAME, "w")) == NULL) {
        printf("Error: 打开文件失败\n");
        exit(0);
    }
    fprintf(fp, "%s", str);
    fclose(fp);

    return 0;
}
```



### 099：读写文件

**题目：**有两个磁盘文件A和B, 各存放一行字母，要求把这两个文件中的信息合并（按字母顺序排列），输出到一个新文件C.txt中。

**程序分析：**你需要先创建 A.txt 与 B.txt。

A.txt文件内容：

```
HelloWorld!
```

B.txt文件内容：

```
ILoveCLanguage
```

C.txt文件内容：

```
!CHILLWaadeeegglllnoooruv
```

```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define ANAME "A.txt"
#define BNAME "B.txt"
#define CNAME "C.txt"

int main(void) {
    FILE *fa, *fb, *fc;
    char str1[100], str2[100];
    int slen, i, j, maxIndex;
    char temp;

    // 打开A.txt文件, 读取内容
    if ((fa = fopen(ANAME, "r")) == NULL) {
        printf("Error: 打开文件%s失败\n", ANAME);
        exit(0);
    }
    fgets(str1, 99, fa);
    fclose(fa);

    // 打开B.txt文件, 读取内容
    if ((fb = fopen(BNAME, "r")) == NULL) {
        printf("Error: 打开文件%s失败\n", BNAME);
        exit(0);
    }
    fgets(str2, 99, fb);
    fclose(fb);

    strcat(str1, str2);
    slen = strlen(str1);
    // 排序str1中的元素：选择排序
    for (i = slen - 1; i > 0; i--) {
        maxIndex = 0;
        for (j = 1; j <= i; j++) {
            if (str1[maxIndex] <= str1[j]) maxIndex = j;
        }
        temp = str1[i];
        str1[i] = str1[maxIndex];
        str1[maxIndex] = temp;
    }

    // 将排序后的字符串写入文件中
    if ((fc = fopen(CNAME, "w")) == NULL) {
        printf("Error: 打开文件%s失败\n", CNAME);
        exit(0);
    }
    fputs(str1, fc);
    fclose(fc);

    return 0;
}
```



### 100：结构体&文件操作

**题目：**有五个学生，每个学生有3门课的成绩，从键盘输入以上数据（包括学生号，姓名，三门课成绩），计算出平均成绩，况原有的数据和计算出的平均分数存放在磁盘文件"stud"中。

```c
#include <stdio.h>
#include<stdlib.h>
#define N 5
#define STUNAME "stud"

typedef struct student {
    int ID;
    int math;
    int english;
    int c;
    double average;
    char name[20];
} Stu;

int main(void) {
    FILE *fp;
    Stu stu[N];
    int i, sum;
    double average = 0.0;

    printf("请输入%d个同学的信息：学生号，姓名，3门成绩：\n", N);
    for(i = 0; i < N; i++) {
        sum = 0;
        printf("第%d个学生：\n\t请输入学号：", i+1);
        scanf("%d", &stu[i].ID);
        printf("\t请输入姓名：");
        scanf("%s", stu[i].name);
        printf("\t请输入数学成绩：");
        scanf("%d", &stu[i].math);
        printf("\t请输入英语成绩：");
        scanf("%d", &stu[i].english);
        printf("\t请输入C语言成绩：");
        scanf("%d", &stu[i].c);
        sum += stu[i].math + stu[i].english + stu[i].c;
        stu[i].average = sum/3.0;
    }

    if ((fp = fopen(STUNAME, "w")) == NULL) {
        printf("Error: 打开文件%s失败\n", STUNAME);
        exit(0);
    }

    for (i = 0; i < N; i++) {
        fprintf(fp, "学号：%d，姓名：%s，数学：%d，英语：%d，C语言：%d，平均分：%lf\n", 
                stu[i].ID, stu[i].name, stu[i].math, stu[i].english, stu[i].c, stu[i].average);
    }
    fclose(fp);

    return 0;
}
```

```
第1个学生：
        请输入学号：1
        请输入姓名：zs
        请输入数学成绩：88
        请输入英语成绩：77
        请输入C语言成绩：98
第2个学生：
        请输入学号：2
        请输入姓名：ls
        请输入数学成绩：99
        请输入英语成绩：89
        请输入C语言成绩：100
第3个学生：
        请输入学号：3
        请输入姓名：ww
        请输入数学成绩：66
        请输入英语成绩：54
        请输入C语言成绩：32
第4个学生：
        请输入学号：4
        请输入姓名：zl
        请输入数学成绩：69
        请输入英语成绩：68
        请输入C语言成绩：66
第5个学生：
        请输入学号：5
        请输入姓名：qq
        请输入数学成绩：100
        请输入英语成绩：100
        请输入C语言成绩：100
```

stud文件内容：

```
学号：1，姓名：zs，数学：88，英语：77，C语言：98，平均分：87.666667
学号：2，姓名：ls，数学：99，英语：89，C语言：100，平均分：96.000000
学号：3，姓名：ww，数学：66，英语：54，C语言：32，平均分：50.666667
学号：4，姓名：zl，数学：69，英语：68，C语言：66，平均分：67.666667
学号：5，姓名：qq，数学：100，英语：100，C语言：100，平均分：100.000000

```

 
